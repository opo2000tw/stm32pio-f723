[extra]

[platformio]
core_dir = pio_core
workspace_dir = pio_work
; libdeps_dir = libdeps
; build_dir = build
cache_dir = pio_cache
include_dir = Core/Inc
src_dir = Core/Src

[env]
platform = ststm32
board = disco_f723ie
framework = stm32cube

lib_extra_dirs =
    ../lib_extra/test
extra_scripts = 
	update_link_flags.py


build_flags = 
	-Wl,-Map,output.map
	-Wl,--gc-sections
	# LINKFLAGS
	-c -mcpu=cortex-m7 -mthumb -mfpu=fpv5-sp-d16 -mfloat-abi=hard 
	; -specs=nano.specs //TODO
	; -lc -lm -lnosys	//TODO
	# CPPDEFINES
	-DUSE_HAL_DRIVER -DSTM32F723xx
	-std=gnu11
	-DUSE_HAL_DRIVER
	-DSTM32F723xx
	-ICore/Inc

[env:debug]
build_flags =
	${env.build_flags}
	-g3 -ggdb -gdwarf-2
	-O0
	-DDEBUG=0
	-DBUILD_VERSION=DEBUG

[env:release]
build_flags =
	${env.build_flags}
	-O2
	-DRELEASE=1
	-DBUILD_VERSION=RELEASE

